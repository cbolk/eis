<!doctype html>
<!--[if lt IE 7]><html lang="en" class="no-js ie6"><![endif]-->
<!--[if IE 7]><html lang="en" class="no-js ie7"><![endif]-->
<!--[if IE 8]><html lang="en" class="no-js ie8"><![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<head>
    <meta charset="UTF-8">

    <title>Totem infopoint</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" sizes="192x192" href="Resources/Icon_xxxhdpi.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-timepicker.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    
    <link rel="stylesheet" href="css/hover.css" media="all">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="js/rs-plugin/css/settings.css">
    <link rel="stylesheet" href="css/totem_css/building.css">
    <link rel="stylesheet" href="css/totem_css/main.css">

    <script type="text/javascript" src="js/modernizr.custom.32033.js"></script>
        

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
</head>

<body>
<header>

        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
                <div class="container" style="width:100%">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                  
<!--BACK BUTTON: ITS BEHAVIOR IS DEMANDED TO SCRIPTS.JS SCROLLMENU() -->
              <a id="back-button2"  class="btn-rounded-colored  btn btn-lg toggle pull-left hvr-push " style="margin-left:6%;"><!-- style="margin-top:-47%;margin-left:90%;"> -->
                  <i class="fa fa-building btn-rounded-icon"></i>
                   <i class="fa fa-reply btn-rounded-icon"></i></a>

              <a id="back-button"  class="btn-rounded-colored btn  btn-lg toggle pull-left hvr-push">
                  <i class="fa fa-institution btn-rounded-icon"></i>
                   <i class="fa fa-reply-all btn-rounded-icon"></i></a>
                

              
                    
                         

                         <a id="back-button-navbar" class="navbar-brand hvr-underline-from-center" href="#" >
                          
                          
                          <i class="fa fa-university" style="color: #ffffff;" ></i>
                          <i class="fa fa-angle-double-left" style="color: #ffffff;" ></i>
                          <span id="demonstrator_title" style="padding-left: 5px; padding-right:20px; color: #ffffff;"></span>
                            
                        </a> 
                         <a id="back-button2-navbar" class="navbar-brand hvr-underline-from-center" href="#">
                          
                          
                          <i class="fa fa-building-o" style="color: #ffffff;" ></i>
                          <i class="fa fa-angle-left" style="color: #ffffff;" ></i>
                          
                          <span id="building_title" style="padding-left: 5px;padding-right:20px; color: #ffffff;"></span> 
                            
                        </a>
                         <a class="navbar-brand hvr-underline-from-center" href="#main">
                          <i class="fa fa-cube" style="color: #ffffff;" ></i>
                          <i class="fa fa-angle-double-up" style="color: #ffffff;" ></i>
                            
                                    <span id="brand_title" style="padding-left: 5px; color: #ffffff;"></span> 
                        </a> 
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                        <ul id="navigation-bar" class="nav navbar-nav navbar-right" style="margin-right:5px;"> 
                            <!--<li><a href="#features">features</a>
                            </li> -->
                            
                            <li id ="energy_nabvar">
                                <a href="#energy_section">
                                    <i class="fa fa-area-chart" ></i>
                                    <span style="padding-left: 5px; padding-bottom: 5px;">Power</span> 
                                </a> 
                            </li>
                           
                        
                            <li>
                                <a href="#ambient">
                                    <i class="fa fa-line-chart"></i>
                                     <span style="padding-left: 5px;">Ambient</span> 
                                 </a> 
                            </li>

                            <li>
                                <a href="#feedback">
                                    <i class="fa fa-pie-chart"></i>
                                    <span style="padding-left: 5px;">Comfort</span> 
                                </a> 
                            </li>


                            <li>
                                <a href="#details">
                                    <i class="fa fa fa-tachometer"></i>
                                    <span style="padding-left: 5px;">Details</span> 
                                </a> 
                            </li>

                            

                           <!--  <li>
                                <a href="#support"><i class="fa fa-map-marker"></i>
                                <span style="padding-left: 5px;"> Where</span> 
                                </a> 
                            </li> -->

                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!-- /.container-fluid-->
        </nav>

    </header>
  <section id="main">
    <div class="container">
      <div id= "head" class="section-heading scrollpoint sp-effect3">
        <!--style="color: #bdbdbd"-->
        <h1 id="room_title"></h1>
        <div class="divider"></div>
      </div>
      <!--SE SONO 4 col-md-3 col-xs-6 , SE SONO 3 col-xs-3-->
  </section>
  <div class="wrapper">
    <!-- ENERGY CHARTS SECTION -->
    <section id="energy_section">
      <div class="container">
        <div class="section-heading scrollpoint sp-effect3">
                    <h1>Power Consumption Info Charts</h1>
                    <div class="divider"></div>
            <div class="filter" id="energy_filter">
              <a id="today_energy" class="button js-filter-energy active sp-effect1" >
                <div class="stacked-icons">
                <span class="fa-stack fa-lg"><i class="fa fa-calendar-o fa-stack-2x fa-fw"></i>
                  <strong class="fa-stack-1x calendar-text" id="e_today"></strong>
                </span>
                <span>Today</span>
                </div>
              </a>
              <a  id="week_energy" class="button js-filter-energy  sp-effect1" >
              <div class="stacked-icons">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle-thin fa-stack-2x fa-fw"></i>
                  <strong class="fa-stack-1x">7</strong>
                </span>
                <span>Last 7 days</span>
              </div>
              </a>
            <a id="month_energy" class="button js-filter-energy  sp-effect1" >
                <div class="stacked-icons">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle-thin fa-stack-2x"></i>
                    <strong class="fa-stack-1x">31</strong>
                  </span>
                  <span>This month</span>
                </div>
            </a>
            <a id="year_energy" class="button js-filter-energy  sp-effect1" >
                <div class="stacked-icons">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle-thin fa-stack-2x"></i>
                    <strong class="fa-stack-1x">Y</strong>
                  </span>
                  <span>This year</span>
                </div>
            </a>
          </div><!-- energy_filter -->
        <div id="powermeter_chart_ms" style="min-width: 300px; height: 400px; margin: 0 auto;"></div>
    </div>
  </div><!-- container -->
  </section>   
        <footer>
            <div class="container">
                <a  class="scrollpoint sp-effect3">
                    <img id="footer_img" alt="" class="logo">
                </a>
                <div class="rights">
                    <p>Copyright &copy; 2015</p>
                </div>
            </div>
        </footer>




    </div>

    <!-- MAP DEFINITION -->
   <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/placeholdem.min.js"></script>
    
    <script src="js/rs-plugin/js/jquery.themepunch.plugins.min.js"></script>
    <script src="js/rs-plugin/js/jquery.themepunch.revolution.min.js"></script>
    <script src="js/waypoints.min.js"></script>
   
    <script src="http://code.highcharts.com/stock/highstock.js"></script>
    
    <script src="js/scripts.js"></script>
    <script src="js/totem_scripts/utilities.cb.js"></script>
    <script src="js/totem_scripts/room.js"></script>
    <script src="js/totem_scripts/meteo.js"></script>
    <script src="js/totem_scripts/charts.js"></script>
    <script src="js/totem_scripts/powermeters.js"></script>
    <script>
    /*
      var DAILY = 1;
      var SEVENDAYS = 7;
      var MONTH = 30;
      var YEAR = 365;

      var LINK_HEADER_MEASUREMENTS_15 = "http://131.175.56.243:8080/measurements/15min/sensor/variable/";
*/
        $(document).ready(function() {
          get_data_room();
          

          var parameters = location.search.substring(1).split("&");
          var temp = parameters[0].split("=");
          demonstrator_name = unescape(temp[1]);

          var parameters2 = location.search.substring(1).split("&");
          var temp2 = parameters2[1].split("=");

          if(demonstrator_name=="Polimi"){
            building_name = "Building "+unescape(temp2[1].split("-")[1]);
            building_name = modifyString(building_name);
          }else{
            if(unescape(temp2[1].split("-")[1]) == "didattico"){
               building_name = "Modulo didattico";
            }else{
               building_name = "Residenza ex-Emiliani";
            }
          }

          //document.getElementById("demonstrator_title").innerHTML = modifyString(demonstrator_name);
          document.getElementById("building_title").innerHTML = (building_name);

          document.getElementById("back-button2").onclick=go_back_building;
          document.getElementById("back-button").onclick=go_back_demonstrator;
          document.getElementById("back-button2-navbar").onclick=go_back_building;
          document.getElementById("back-button-navbar").onclick=go_back_demonstrator;
          create_room_menu(true);
 
          if(modifyString(demonstrator_name)=="Polimi"){
            document.getElementById("footer_img").src="img/1.png";
          }else{
            document.getElementById("footer_img").src="img/2.png";
          }

          document.getElementById("today_energy").onclick = show_day_powerdetails;
          document.getElementById("week_energy").onclick = show_week_powerdetails;
          document.getElementById("month_energy").onclick = show_month_powerdetails; 
          document.getElementById("year_energy").onclick = show_year_powerdetails;
          
          create_room_menu(true);
          /* default daily stats */
          show_chart_powerdetails_window(AGGREGATE_15, DAY,ACTIVE_POWER_LABEL);
          // var measures = [], defer;
          // get_all_measures_from_variableclass(room.id, ACTIVE_POWER_LABEL, AGGREGATE_15, DAY).done(function (measures){
          //     //console.log(measures.length); 
          //     create_power_chart_multisource(measures, DAY);           
          // });

         // get_variables_room().done(function(roomvars){
          //     /* retrieve the variable class for the room given the labels we are looking for */
          //     var varclassid = get_variableclass_room(roomvars, ACTIVE_POWER_LABEL);
          //     get_variables_class_room(varclassid).done(function(selroomvars){
          //       var measures = [], defers = [], defer;
          //       var nvars = selroomvars.length;
          //       var link;
          //       for(var i = 0; i < nvars; i++ ){
          //         link = prepare_link_variable_measures(LINK_HEADER_MEASUREMENTS_15, selroomvars[i].variableid, date, DAY);
          //         //console.log(selroomvars[i].variableid + " @ " + link);
          //         defer = get_variable_measures_promise(link, selroomvars[i].variableid, selroomvars[i].label, selroomvars[i].measure).done(function(pmdata){
          //             //console.log(pmdata[0][0] + " provided " + pmdata[0][2].length);
          //             measures = measures.concat(pmdata);
          //         });
          //         defers.push(defer);
          //       }
          //       /* when ALL data from different JSON has been collected -- create the chart*/
          //       $.when.apply(window, defers).done(function () {
          //          //console.log("finished loading data!");
          //          create_power_chart_multisource(measures, DAY);
          //       });
          //     }); 
          // });                
       }); 





    //WINDOW HAS JUST FINISH LOADING
         var date = new Date();
        
        document.getElementById('e_today').innerHTML = date.getDate();
   </script> 
</body>
</html>
 
